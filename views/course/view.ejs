<%- include('../partials/header') %>

<h1><%= course.course_name %></h1>
<p>Credits: <%= course.credits %> | Branch: <%= course.branch %></p>

<!-- Lectures Section -->
<h2>Lectures</h2>
<% if (course.lectures && course.lectures.length > 0) { %>
  <ul>
    <% course.lectures.forEach(lecture => { %>
      <li>
        <a href="/courses/<%= course.course_id %>/lectures/<%= lecture._id %>"><%= lecture.title %></a>
        <a href="/courses/<%= course.course_id %>/lectures/<%= lecture._id %>/delete">[Delete]</a>
      </li>
    <% }) %>
  </ul>
<% } else { %>
  <p>No lectures available for this course.</p>
<% } %>

<h2>Add Lecture</h2>
<form action="/courses/<%= course.course_id %>/lectures" method="POST" enctype="multipart/form-data">
  <input type="text" name="title" placeholder="Lecture Title" required>
  <input type="text" name="description" placeholder="Lecture Description">
  <input type="file" name="pdf" accept="application/pdf">
  <button type="submit">Add Lecture</button>
</form>

<hr>

<!-- Assignments Section -->
<h2>Assignments</h2>
<% if (course.assignments && course.assignments.length > 0) { %>
  <ul>
    <% course.assignments.forEach(assignment => { %>
      <li>
        <strong><%= assignment.title %></strong> - <%= assignment.description %>
        <% if (assignment.pdf_url) { %>
          <a href="<%= assignment.pdf_url %>" target="_blank">[Download]</a>
        <% } %>
        <a href="/courses/<%= course.course_id %>/assignments/<%= assignment._id %>/delete">[Delete]</a>
      </li>
    <% }) %>
  </ul>
<% } else { %>
  <p>No assignments available for this course.</p>
<% } %>

<h2>Add Assignment</h2>
<form action="/courses/<%= course.course_id %>/assignments" method="POST" enctype="multipart/form-data">
  <input type="text" name="title" placeholder="Assignment Title" required>
  <input type="text" name="description" placeholder="Assignment Description">
  <input type="file" name="pdf" accept="application/pdf">
  <button type="submit">Add Assignment</button>
</form>

<%- include('../partials/footer') %>
